{% for network in (tinc_default_networks + tinc_networks) %}
{%   if network.name|d() and network.tinc_options|d() %}
  - 'tinc/networks/{{ network.name }}/by-group/all/hosts'
  - 'tinc/networks/{{ network.name }}/by-network/{{ network.name }}/hosts'
{%     for group in tinc_inventory_groups %}
  - 'tinc/networks/{{ network.name }}/by-group/{{ group }}/hosts'
{%     endfor %}
{%     for host in tinc_inventory_hosts %}
{%       if ((network.name in (tinc_networks | map(attribute="name") | list) or
              network.name in (tinc_default_networks | map(attribute="name") | list)) and
             host == tinc_hostname) %}
  - 'tinc/networks/{{ network.name }}/by-host/{{ host }}/hosts'
{%       endif %}
{%     endfor %}
{%   endif %}
{% endfor %}
