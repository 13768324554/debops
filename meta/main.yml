---

dependencies:

  - role: debops.etc_services
    etc_services_dependent_list:

      - name: 'salt-publish'
        port: '{{ salt_publish_port }}'
        comment: 'Salt Master (publish)'

      - name: 'salt-return'
        port: '{{ salt_return_port }}'
        comment: 'Salt Master (return)'

  - role: debops.ferm
    ferm_input_list:

      - type: 'dport_accept'
        dport: [ 'salt-publish', 'salt-return' ]
        saddr: '{{ salt_allow + salt_group_allow + salt_host_allow }}'
        accept_any: True
        filename: 'salt_dependency_accept'
        weight: '20'


galaxy_info:
  author: 'Maciej Delmanowski'
  description: 'Install and configure Salt master service'
  company: 'DebOps'
  license: 'GNU General Public License v3'
  min_ansible_version: '1.7.0'
  platforms:
  - name: Ubuntu
    versions:
    - precise
    - quantal
    - raring
    - saucy
    - trusty
  - name: Debian
    versions:
    - wheezy
    - jessie
  categories:
  - system

ansigenome_info:
  github_url: "https://github.com/debops/ansible-salt"
  git_branch: "master"
  galaxy_id: ""

  travis: True

  license_url: 'https://tldrlegal.com/license/gnu-general-public-license-v3-(gpl-3)'

  authors:
    - name:  'Maciej Delmanowski'
      url: ''
      email: 'drybjed@gmail.com'
      twitter: 'drybjed'
      github: 'drybjed'

  synopsis: |
    This role will install and configure [SaltStack](http://www.saltstack.com/)
    master service, which can be used to manage Salt minions. By default, Salt
    master packages from upstream repositories will be installed and configured
    to listen on both IPv4 and IPv6 networks and will accept connections from
    all hosts; you can limit connections through the firewall using
    [debops.ferm](https://github.com/debops/ansible-ferm/) role.


