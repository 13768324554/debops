---
# .. vim: foldmarker=[[[,]]]:foldmethod=marker

# debops.debops_api default variables [[[
# =========================================
#
# .. contents:: Sections
#    :local:


# Packages and installation [[[
# -----------------------------

# .. envvar:: debops_api__base_packages [[[
#
# List of base packages to install.
debops_api__base_packages:
  - 'python3-yaml'
  - 'python3-git'
  - 'python3-docutils'

                                                                   # ]]]
# .. envvar:: debops_api__deploy_state [[[
#
# What is the desired state which this role should achieve? Possible options:
#
# ``present``
#   Default. Ensure that changeme/FIXME is installed and configured as requested.
#
# ``absent``
#   Ensure that changeme/FIXME is uninstalled and it's configuration is removed.
#
debops_api__deploy_state: 'present'
                                                                   # ]]]
                                                                   # ]]]
# DebOps API configuration [[[
# ----------------------------

# .. envvar:: debops_api__domain [[[
#
# Public domain of the DebOps API.
debops_api__domain: [ 'api.{{ ansible_domain }}' ]

                                                                   # ]]]

# .. envvar:: debops_api__root_dir [[[
#
# Root directory of the API data.
# Currently generated by `debops/docs/ <https://github.com/debops/docs/>`_.
debops_api__root_dir: '/srv/www/sites/docs.debops.org/_static/api'

                                                                   # ]]]
                                                                   # ]]]
# Role-dependent configuration [[[
# --------------------------------

# .. envvar:: debops_api__nginx__servers [[[
#
# :program:`nginx` server configuration managed by the ``debops.debops_api``
# role.
debops_api__nginx__servers:

  - by_role: 'debops.debops_api'
    enabled: True
    default: False
    type: 'default'
    name: '{{ debops_api__domain }}'
    root: '{{ debops_api__root_dir }}'

    location_list:
      - pattern: '= /robots.txt'
        options: |
          log_not_found off;

      - pattern: '/'
        options: |
          autoindex on;
          default_type text/plain;

# ]]]
# ]]]
# ]]]
