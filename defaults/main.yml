---
# Default variables
# =================

# .. contents:: Sections
#    :local:
#
# .. Basic options (((
#
# -----------------
#   Basic options
# -----------------

# .. envvar:: apt__enabled
#
# Enable or disable this role.
apt__enabled: True


# .. envvar:: apt_remove_default_configuration
#
# Ensure that ``/etc/apt/apt.conf`` is absent.
# This file might contain APT proxy or other settings which overwrite options
# set by ``debops.apt`` if present.
# Thus the default is to ensure that this file is absent.
apt_remove_default_configuration: True


# .. envvar:: apt_update_cache_early
#
# FIXME: Not implemented yet.
# Update APT cache early in the playbook if it's older than 24h
# Set to False to disable update (useful when changing APT mirrors)
apt_update_cache_early: '{{ (60 * 60 * 24) }}'

# .. )))

# .. Packages to install (((
#
# -----------------------
#   Packages to install
# -----------------------

# .. envvar:: apt_base_packages
#
# Default base packages to install.
# This list will be included in Debian Preseed configuration.
apt_base_packages: [ 'ed', 'python', 'python-apt', 'lsb-release', 'make', 'sudo', 'gnupg-curl',
                     'git', 'wget', 'curl', 'rsync', 'netcat-openbsd', 'bridge-utils', 'vlan',
                     'openssh-server', 'bsdutils', 'python-pycurl', 'python-httplib2',
                     'apt-transport-https', 'acl', 'python-pip' ]


# .. envvar:: apt_update_notification_packages
#
# List of packages to install when ``apt_update_notifications`` is set to
# ``True``.
apt_update_notification_packages:
  - 'apt-listchanges'
  - 'apticron'


# .. envvar:: apt_packages
#
# List of additional "global" packages to install.
apt_packages: []


# .. envvar:: apt_group_packages
#
# List of packages for a group of hosts (only one group supported).
apt_group_packages: []


# .. envvar:: apt_host_packages
#
# List of packages to install on a given host.
apt_host_packages: []


# .. envvar:: apt_conditional_whitelist
#
# List of conditions that are checked to enable additional packages
# automatically.
apt_conditional_whitelist:

    # Install firmware packages on selected systems (rack servers, etc.).
  - 'firmware'

    # Install ``irqbalance`` package on multi-core systems.
  - 'irqbalance'

    # Install ``uptimed`` on host systems, but not on virtualized guests.
  - 'uptimed'

# .. )))

# .. Proxy settings (((
#
# ------------------
#   Proxy settings
# ------------------

# .. envvar:: apt__proxy
#
# This variable allows you to define a software repository proxy which should
# be used by specifying the URL of the proxy server.
#
# Examples::
#
#    apt__proxy_url: 'http://software-cache.example.org:3142/'
#
#    ## or
#
#    apt__proxy_url: 'https://software-cache.example.org:3142/'
#
# The default is to not use a proxy server and connect directly to the repository servers.
apt__proxy_url: ''


# .. envvar:: apt__proxy_bypass_for_bugs_debian_org
#
# Bypass the configured proxy server for https://bugs.debian.org.
# This might be necessary when you are using ``apt-listbugs``.
# See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=775126.
apt__proxy_bypass_for_bugs_debian_org: False

# .. )))

# .. APT repository mirrors (((
#
# --------------------------
#   APT repository mirrors
# --------------------------

# .. envvar:: apt_mirrors
#
# List of user-specified APT repository mirrors. These mirrors will be used for
# all APT repositories that don't specify their own.
#
# Example::
#
#    apt_mirrors: [ 'http://cdn.debian.net/debian' ]
#
# [ 'http://cdn.debian.net/debian' ]
apt_mirrors: []


# .. envvar:: apt_group_mirrors
#
# List of user-specified APT repository mirrors. These mirrors will be used for
# all APT repositories that don't specify their own.
apt_group_mirrors: []


# .. envvar:: apt_host_mirrors
#
# List of user-specified APT repository mirrors. These mirrors will be used for
# all APT repositories that don't specify their own.
apt_host_mirrors: []


# .. envvar:: apt_default_mirrors_lookup
#
# String used to select default mirrors based on Linux distribution used on
# a specific host. Default mirrors are set using
# 'vars/apt_default_mirrors_*.yml' files. To disable default mirrors, define
# variable 'apt_default_mirrors: []' in inventory.
apt_default_mirrors_lookup: '{{ ansible_distribution }}'

# .. )))

# .. APT repository keys (((
#
# -----------------------
#   APT repository keys
# -----------------------

# .. envvar:: apt_keys
#
# Global list of additional repository keys enabled automatically by Ansible.
# See documentation of the apt_key_ module for possible values.
#
# .. _apt_key: https://docs.ansible.com/ansible/apt_key_module.html
#
# Example::
#
#    apt_keys:
#
#        ## Example key definition from default 'debops.reprepro' configuration
#      - url: '{{ "https://apt." + ansible_domain + "/" + ansible_distribution | lower + "/apt." + ansible_domain + ".asc" }}'
#        state: 'present'
#
apt_keys: []


# .. envvar:: apt_group_keys
#
# Host group list of additional repository keys enabled automatically by Ansible.
# See documentation of the apt_key_ module for possible values.
apt_group_keys: []


# .. envvar:: apt_host_keys
#
# Host list of additional repository keys enabled automatically by Ansible.
# See documentation of the apt_key_ module for possible values.
apt_host_keys: []


# .. envvar:: apt_keys_delayed
#
# Global delayed APT keys, not configured on the first Ansible run, but enabled
# on subsequent runs. Can be used in cases where a APT repository might not be
# available initially.
apt_keys_delayed: []


# .. envvar:: apt_group_keys_delayed
#
# Host group delayed APT keys, not configured on the first Ansible run, but enabled
# on subsequent runs. Can be used in cases where a APT repository might not be
# available initially.
apt_group_keys_delayed: []


# .. envvar:: apt_host_keys_delayed
#
# Host delayed APT keys, not configured on the first Ansible run, but enabled
# on subsequent runs. Can be used in cases where a APT repository might not be
# available initially.
apt_host_keys_delayed: []

# .. )))

# .. APT repositories (((
#
# --------------------
#   APT repositories
# --------------------

# .. envvar:: apt_repositories
#
# Global of additional repositories enabled automatically by Ansible. See
# documentation of apt_repository_ module for possible values.
#
# .. _apt_repository: https://docs.ansible.com/ansible/apt_repository_module.html
#
# Example::
#
#    apt_repositories:
#
#        ## Example repository definition from default 'debops.reprepro' configuration.
#      - repo: '{{ "deb https://apt." + ansible_domain + "/" + ansible_distribution | lower + " " + ansible_distribution_release + "-backports main" }}'
#        state: 'present'
#
#         ## Example Ubuntu PPA (works only on Ubuntu).
#      - repo: 'ppa:nginx/stable'
#        state: 'present'
#
apt_repositories: []


# .. envvar:: apt_group_repositories
#
# Host group of additional repositories enabled automatically by Ansible. See
# documentation of apt_repository_ module for possible values.
apt_group_repositories: []


# .. envvar:: apt_host_repositories
#
# Host of additional repositories enabled automatically by Ansible. See
# documentation of apt_repository_ module for possible values.
apt_host_repositories: []


# .. envvar:: apt_repositories_delayed
#
# Global delayed APT repositories, not configured on the first Ansible run,
# but enabled on subsequent runs. Can be used in cases where APT repository
# might not be available initially.
apt_repositories_delayed: []


# .. envvar:: apt_group_repositories_delayed
#
# Host group delayed APT repositories, not configured on the first Ansible run,
# but enabled on subsequent runs. Can be used in cases where APT repository
# might not be available initially.
apt_group_repositories_delayed: []


# .. envvar:: apt_host_repositories_delayed
#
# Host delayed APT repositories, not configured on the first Ansible run,
# but enabled on subsequent runs. Can be used in cases where APT repository
# might not be available initially.
apt_host_repositories_delayed: []

# .. )))

# .. APT default repositories (((
#
# ----------------------------
#   APT default repositories
# ----------------------------

# .. envvar:: apt_sources
#
# Global list of user-specified APT repositories. More information and list of
# parameters can be found in :file:`templates/etc/apt/sources.list.j2`.
#
# Examples::
#
#    apt_sources:
#
#      ## Enable Debian Testing Repository.
#      - comment:  'Debian Testing Repository'
#        releases:
#          - 'stretch'
#        sections:
#          - 'main'
#
#      ## Example repository definition from default ``debops.reprepro`` configuration.
#      - comment:  'Local backports of Debian Testing packages'
#        mirrors:  [ '{{ "http://apt." + ansible_domain + "/" + ansible_distribution | lower }}' ]
#        releases: [ '{{ apt_sources_release_backports }}' ]
#        sections: [ 'main', 'contrib', 'non-free' ]
#
apt_sources: []


# .. envvar:: apt_group_sources
#
# Host group list of user-specified APT repositories. More information and list
# of parameters can be found in :file:`templates/etc/apt/sources.list.j2`.
apt_group_sources: []


# .. envvar:: apt_host_sources
#
# Host list of user-specified APT repositories. More information and list of
# parameters can be found in :file:`templates/etc/apt/sources.list.j2`.
apt_host_sources: []


# .. envvar:: apt_sources_delayed
#
# Global list of secondary APT repositories which are not enabled on the first Ansible
# run, but are enabled automatically on subsequent runs. It can be used in
# cases where APT repository might not be available initially.
apt_sources_delayed: []


# .. envvar:: apt_group_sources_delayed
#
# Host group list of secondary APT repositories which are not enabled on the first Ansible
# run, but are enabled automatically on subsequent runs. It can be used in
# cases where APT repository might not be available initially.
apt_group_sources_delayed: []


# .. envvar:: apt_host_sources_delayed
#
# Host group list of secondary APT repositories which are not enabled on the first Ansible
# run, but are enabled automatically on subsequent runs. It can be used in
# cases where APT repository might not be available initially.
apt_host_sources_delayed: []


# .. envvar:: apt_default_sources_lookup
#
# String used to select default repositories based on Linux distribution used
# on a specific host. Default repositories are set using
# :file:`vars/apt_default_sources_*.yml` files. To disable default repositories,
# define ``apt_default_sources: []`` in inventory.
# If you just need to modify the APT sections, you can define them as
# ``apt_sources_sections``.
apt_default_sources_lookup: '{{ ansible_distribution }}'


# .. envvar:: apt_sources_release
#
# Linux distribution release to use for default APT repositories.
apt_sources_release: '{{ ansible_distribution_release.split("/")[0] }}'


# .. envvar:: apt_sources_release_updates
#
# Linux distribution updates release to use for default APT repositories.
apt_sources_release_updates: '{{ apt_sources_release }}-updates'


# .. envvar:: apt_sources_release_security
#
# Linux distribution security release to use for default APT repositories.
apt_sources_release_security: '{{ apt_sources_release }}-security'


# .. envvar:: apt_sources_release_backports
#
# Linux distribution backports to use for default APT repositories.
apt_sources_release_backports: '{{ apt_sources_release }}-backports'


# .. envvar:: apt_sources_release_list
#
# List of releases to enable in default APT repositories.
apt_sources_release_list:
  - '{{ apt_sources_release }}'
  - '{{ apt_sources_release_updates }}'
  - '{{ apt_sources_release_backports }}'


# .. envvar:: apt_sources_types
#
# List of repository types to enable for default APT repositories. To enable
# source repositories, add ``deb-src`` to the list.
apt_sources_types: [ 'deb' ]

# .. )))

# .. Update notifications (((
#
# ------------------------
#   Update notifications
# ------------------------

# .. envvar:: apt_mail_notifications
#
# Send mail notifications from APT to these email addresses.
apt_mail_notifications: [ 'root' ]


# .. envvar:: apt_update_notifications
#
# Enable mail notifications about updates using the packages defined by
# ``apt_update_notification_packages``.
apt_update_notifications: True


# .. envvar:: apt_update_notifications_type_listchanges
#
# What type of notifications to send.
# Choices: ``news``, ``changelogs``, ``both``.
apt_update_notifications_type_listchanges: 'news'


# .. envvar:: apt_update_notifications_type_apticron
#
# What type of notifications to send.
# Choices: ``news``, ``changelogs``, ``both``.
apt_update_notifications_type_apticron: 'both'


# .. envvar:: apt_update_notifications_diff
#
# Send only information about changes from the last notification?
apt_update_notifications_diff: True

# .. )))

# .. Role-dependent configuration (((
#
# --------------------------------
#   Role-dependent configuration
# --------------------------------

# .. envvar:: apt__apt_preferences__dependent_list
#
# Configuration for the ``debops.apt_preferences`` role.
apt__apt_preferences__dependent_list:

  - package: 'git git-*'
    backports: [ 'wheezy' ]
    reason:  'Better support for git submodules - http://stackoverflow.com/a/7593496'
    by_role: 'debops.apt'

  - package: 'irqbalance'
    backports: [ 'wheezy' ]
    reason:  'Issues in wheezy package - http://debian.distrosfaqs.org/debian-user/wheezy-irqbalance/'
    by_role: 'debops.apt'

  - package: 'apt-cacher-ng'
    delete: True
    ## Remove file by ``debops.apt`` which is now managed by ``debops.apt_cacher_ng``.
    by_role: 'debops.apt'
    backports: [ 'jessie' ]

# .. )))
