---

# List of IP addresses or CIDR networks allowed to connect to HTTP or HTTPS
# service. It will be configured in iptables firewall via 'ferm' role. If there
# are no entries, nginx will accept connections from any IP address or network.
# If you have multiple web services on a host, you might want to control access
# using 'item.location_allow' option instead.
nginx_allow: []
nginx_group_allow: []
nginx_host_allow: []

nginx_base_packages: [ 'nginx-full' ]
nginx_user: 'www-data'

# Nicenness, from 20 (nice) to -20 (not nice)
nginx_worker_priority: '0'

nginx_worker_processes: '{{ ansible_processor_cores }}'
nginx_worker_connections: 1024

# Maximum number of opened files per process, must be higher than worker_connections
nginx_worker_rlimit_nofile: 4096

nginx_server_tokens: 'off'

nginx_server_names_hash_bucket_size: 64
nginx_server_names_hash_max_size: 512

nginx_default_keepalive_timeout: 60

# Enable or disable support for PKI/SSL/TLS in nginx
nginx_pki: True

# PKI base directory
nginx_pki_path: '{% if (ansible_local is defined and ansible_local.pki is defined) %}{{ ansible_local.pki.base_path }}{% else %}/etc/pki{% endif %}'

# PKI realm to use for nginx
nginx_pki_realm: '{% if (ansible_local is defined and ansible_local.pki is defined) %}{{ ansible_local.pki.realm }}{% else %}system{% endif %}'

# Path to default certificate, key and DH parameters file used by all nginx
# servers if not specified otherwise in server configuration. Relative to
# 'nginx_pki_realm' variable
nginx_pki_crt: 'default.crt'
nginx_pki_key: 'default.key'
nginx_pki_dhparam: 'dhparam.pem'

# Default SSL cipher list. More information in vars/main.yml
nginx_default_ssl_ciphers: 'pfs'

# Default SSL ECDH curve used on servers, to see a list of supported curves, run:
#     openssl ecparam -list_curves
# See also: https://security.stackexchange.com/questions/31772/
nginx_default_ssl_curve: 'secp384r1'

# List od DNS servers used to resolve OCSP stapling. If it's empty, nginx role
# will try to use nameservers from /etc/resolv.conf
# Currently only the first nameserver is used
nginx_ocsp_resolvers: []

# HTTP Strict-Transport-Security
# https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security
nginx_hsts_age: '15768000'
nginx_hsts_subdomains: True

# Specify server name which will be marked as default_server
nginx_default_name: ''

# Default server template used if no type is selected
nginx_default_type: 'default'

# nginx base path for website directories
# It is exposed using Ansible local facts as 'ansible_local.nginx.www'
nginx_root_www_path: '/srv/www'

# Default server root
nginx_default_root: '{{ nginx_root_www_path + "/sites/default/public" }}'

# Create global webroot directories?
# Path: /srv/www/sites/*/public
nginx_webroot_create: True
nginx_webroot_owner: 'root'
nginx_webroot_group: 'root'
nginx_webroot_mode: '0755'

# List of IP addresses or CIDR ranges to allow access to the status page
nginx_status: []

# By default allow access to the status page from webserver itself
nginx_status_localhost: '{{ [ "127.0.0.1/32", "::1/128" ] + ansible_all_ipv4_addresses + ansible_all_ipv6_addresses }}'

# Name of the nginx status page location
nginx_status_name: '/nginx_status'

# Hash of symlinks to local server definitions stored in /etc/nginx/sites-local/
# Entries with empty values or False will be removed
# Symlinks will be created in /etc/nginx/sites-enabled/
nginx_local_servers: {}
  #'symlink': 'file'
  #'other-symlink.conf': 'sub/directory/file.conf'
  #'removed-file': False
  #'also-removed':
  #'symlink\ with\ spaces.conf': 'other-file.conf'

# List of nginx map definitions
# Each map should be defined in it's own hash variable, similar to upstreams
# and servers
# http://nginx.org/en/docs/http/ngx_http_map_module.html
nginx_maps: []

# List of nginx upstream definitions
nginx_upstreams: [ '{{ nginx_upstream_php5 }}' ]

# Upstream for default php5-fpm configuration
nginx_upstream_php5:
  enabled: True
  name: 'php5_www-data'
  type: 'php5'
  php5: 'www-data'

# List of nginx server definitions
nginx_servers: [ '{{ nginx_server_default }}' ]

# Default nginx site
# List and description of available parameters can be found in nginx server
# templates: templates/etc/nginx/sites-available/*.conf.j2
nginx_server_default:
  enabled: True
  name: []
  default_index: '{{ nginx_default_index_html }}'

# Contents of default 'index.html' page created automatically if
# 'item.default_index' is set in the server configuration
nginx_default_index_html: |
  <html>
    <head>
      <title>Welcome to nginx!</title>
    </head>
    <body>
      <h1>Your website is working!</h1>
    </body>
  </html>

