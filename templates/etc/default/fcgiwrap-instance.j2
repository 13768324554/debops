# {{ ansible_managed }}

# Defaults for fcgiwrap (if not declared, hardcoded values from the
# init script are used).

{% set fcgiwrap_tpl_options = { 'value': '' } %}
{% for key, value in fcgiwrap_options_map.iteritems() %}
{% if fcgiwrap_register_version.stdout|d() | version_compare(key, '>=') %}
{% set _ = fcgiwrap_tpl_options.update({ 'value': value }) %}
{% endif %}
{% endfor %}
# Number of instances to launch
DAEMON_OPTS="{{ item.options | d(fcgiwrap_tpl_options['value']) }}"

# Socket location
FCGI_SOCKET="{{ item.socket | d('/run/fcgiwrap-' + item.name + '.socket') }}"

# User and group for the daemon processes
FCGI_USER="{{ item.user | d(fcgiwrap_user) }}"
FCGI_GROUP="{{ item.group | d(fcgiwrap_group) }}"

# Owner of the socket, if available (defaults to $FCGI_USER/$FCGI_GROUP)
# Use this of you want to run scritps as a different user that the
# webserver.
FCGI_SOCKET_OWNER="{{ item.socket_user | d(fcgiwrap_socket_user) }}"
FCGI_SOCKET_GROUP="{{ item.socket_group | d(fcgiwrap_socket_group ) }}"

