## cryptsetup_remote_unlock

<!-- This file was generated by Ansigenome. Do not edit this file directly but
     instead have a look at the files in the ./meta/ directory. -->

[![Travis CI](http://img.shields.io/travis/ypid/ansible-cryptsetup_remote_unlock.svg?style=flat)](http://travis-ci.org/ypid/ansible-cryptsetup_remote_unlock)
[![Ansible Galaxy](http://img.shields.io/badge/galaxy-ypid.cryptsetup_remote_unlock-660198.svg?style=flat)](https://galaxy.ansible.com/ypid/cryptsetup_remote_unlock)
[![Platforms](http://img.shields.io/badge/platforms-debian-lightgrey.svg?style=flat)](#)
[![GitHub Tags](https://img.shields.io/github/tag/ypid/ansible-cryptsetup_remote_unlock.svg)](https://github.com/ypid/ansible-cryptsetup_remote_unlock)
[![GitHub Stars](https://img.shields.io/github/stars/ypid/ansible-cryptsetup_remote_unlock.svg)](https://github.com/ypid/ansible-cryptsetup_remote_unlock)

Configure an encrypted headless system to enter the password over SSH.

Read more about this:

* /usr/share/doc/cryptsetup/README.remote.gz
* [SSH to decrypt encrypted LVM during headless server boot?](http://unix.stackexchange.com/a/79203)

If you want to show a message above the password promt, check out my
related role: [initramfs_message](https://galaxy.ansible.com/ypid/initramfs_message/)

To unlock the system, you can have a look at: https://github.com/sdrfnord/scripts/tree/master/scout

### Alternative roles

* [0x46616c6b.rootcrypto](https://github.com/systemli/ansible-rootcrypto) looks nice but I have not tested it yet.
* [martin-v.sshpreluks](https://github.com/martin-v/ansible-sshpreluks) looks nice but I have not tested it yet.

### Installation

This role requires at least Ansible `v1.9.0`. To install it, run:

```Shell
ansible-galaxy install ypid.cryptsetup_remote_unlock
```

To install via git, run either:

```Shell
git clone https://github.com/ypid/ansible-cryptsetup_remote_unlock.git ypid.cryptsetup_remote_unlock
git submodule add https://github.com/ypid/ansible-cryptsetup_remote_unlock.git ypid.cryptsetup_remote_unlock
```



### Role variables

List of default variables available in the inventory:

```YAML
---

cryptsetup_remote_unlock_grub_timeout: 1

# Where to put the generated ssh key on the client.
cryptsetup_remote_unlock_local_ssh_dir: "/root/.ssh"

# Default path where dropbear expects the ssh keys.
cryptsetup_remote_unlock_remote_ssh_dir: "/etc/initramfs-tools/root/.ssh"

# If true, remove all unneeded private keys from the server. Make sure you have
# the private keys somewhere else because you will need them to login to your
# initramfs system.
cryptsetup_remote_unlock_remote_ssh_remove_after_copy: False

# FIXME: Currently does not work. Intended to specify a local public key which
# can be used in the authorized_keys file of dropbear.
cryptsetup_remote_unlock_public_key: False

# cryptsetup_remote_unlock_network_interface: "eth0"
cryptsetup_remote_unlock_network_ip_line: "{{ ansible_default_ipv4.address }}::{{ ansible_default_ipv4.address }}:{{ ansible_default_ipv4.netmask }}:::off"
# cryptsetup_remote_unlock_network_ip_line: "{{ ansible_eth0.ipv4.address }}:::{{ ansible_eth0.ipv4.netmask }}:{{ ansible_hostname }}::off"
# cryptsetup_remote_unlock_network_ip_line: "192.0.2.23:::255.255.255.0:noname::off"
# ip=<client-ip>:<server-ip>:<gw-ip>:<netmask>:<hostname>:<device>:<autoconf>
# https://www.kernel.org/doc/Documentation/filesystems/nfs/nfsroot.txt
```




### Authors and license

`cryptsetup_remote_unlock` role was written by:

- [Robin Schneider](https://github.com/ypid) | [e-mail](mailto:ypid@riseup.net)

License: [AGPLv3](https://tldrlegal.com/license/gnu-affero-general-public-license-v3-%28agpl-3.0%29)

***

README generated by [Ansigenome](https://github.com/nickjj/ansigenome/).
