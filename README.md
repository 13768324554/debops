## crypttab

[![Travis CI](http://img.shields.io/travis/ypid/ansible-crypttab.svg?style=flat)](http://travis-ci.org/ypid/ansible-crypttab)
[![Ansible Galaxy](http://img.shields.io/badge/galaxy-ypid.crypttab-660198.svg?style=flat)](https://galaxy.ansible.com/list#/roles/4559)
[![Platforms](http://img.shields.io/badge/platforms-debian%20/%20ubuntu-lightgrey.svg?style=flat)](https://galaxy.ansible.com/list#/roles/4559)
[![GitHub Tags](https://img.shields.io/github/tag/ypid/ansible-crypttab.svg)](https://github.com/ypid/ansible-crypttab)
[![GitHub Stars](https://img.shields.io/github/stars/ypid/ansible-crypttab.svg)](https://github.com/ypid/ansible-crypttab)


Manage cryptsetup devices via /etc/crypttab.

### Features

* Add or remove devices in /etc/crypttab
* Optionally add or remove these devices in /etc/fstab
* Optionally copy the keyfile to the target

### Installation

This role requires at least Ansible `v1.8.4`. To install it, run:

```Shell
ansible-galaxy install ypid.crypttab
```

To install via git, run either:

```Shell
git clone https://github.com/ypid/ansible-crypttab.git ypid.crypttab
git submodule add https://github.com/ypid/ansible-crypttab.git ypid.crypttab
```




### Role variables

List of default variables available in the inventory:

```YAML
---

## "Global" crypttab devices
crypttab_list: []

## "Host group" crypttab devices
crypttab_group_list: []

## "Host" crypttab devices
crypttab_host_list: []

# crypttab_host_list:
#     ## Name of the cryptsetup device and the mountpoint
#   - name: 'name'
#     ## Optional. Filepath for the keyfile on the Ansible controller. Will be copied over to the target.
#     # keyfile: '/home/admin/encfs/cryptsetup_keyfiles/name.keyfile'
#     backing_device: 'UUID=bb51423a-3384-11e5-beee-3cd92b26fd34'
#     mount_state: 'present'

crypttab_default_options: 'luks'

## Path on the target where the keyfiles should be stored.
crypttab_keyfile_path: '/usr/local/etc'

crypttab_default_mount_fstype: 'ext4'
crypttab_default_mount_options: 'user,auto,noatime,nodiratime'
crypttab_default_mount_state: 'present'
crypttab_default_mountpoint_parent_directory: '/media'

crypttab_default_keyfile_owner: 'root'
crypttab_default_keyfile_group: 'root'
crypttab_default_keyfile_mode: '0400'
```

List of internal variables used by the role:

    crypttab_list_combined


### Authors and license

`crypttab` role was written by:

- [Robin Schneider](https://github.com/ypid) | [e-mail](mailto:ypid@riseup.net)

License: [AGPLv3](https://tldrlegal.com/license/gnu-affero-general-public-license-v3-%28agpl-3.0%29)

***

README generated by [Ansigenome](https://github.com/nickjj/ansigenome/).
