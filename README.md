## kernel_module

[![Travis CI](http://img.shields.io/travis/ypid/ansible-kernel_module.svg?style=flat)](http://travis-ci.org/ypid/ansible-kernel_module)
[![Ansible Galaxy](http://img.shields.io/badge/galaxy-ypid.kernel_module-660198.svg?style=flat)](https://galaxy.ansible.com/list#/roles/4557)
[![Platforms](http://img.shields.io/badge/platforms-debian%20/%20ubuntu-lightgrey.svg?style=flat)](#)


Manage Linux kernel modules.

### Features

* Module blacklisting
* Module loading (with optional parameters)
* Optionally forces that a module is loaded with certain parameters by unloading it first.
* Either make changes permanent or only to the running system. Default is permanent.

### Installation

This role requires at least Ansible `v1.8.4`. To install it, run:

    ansible-galaxy install ypid.kernel_module

To install via git, run either:

    git clone https://github.com/ypid/ansible-kernel_module.git ypid.kernel_module
    git submodule add https://github.com/ypid/ansible-kernel_module.git ypid.kernel_module




### Role variables

List of default variables available in the inventory:

    ---
    
    # name (string, required): Name of the kernel module.
    #
    # blacklist (boolean, optional, default: false):
    # If true, blacklist the module. Note that blacklist dominates the loading of
    # modules.
    #
    # state (string, optional, default: undefined):
    # If 'present' load the module unless it is blacklisted. Unload if 'absent'.
    #
    # persistent (boolean, optional, default: true):
    # If true, make changes permanent else the changes will not persist a reboot.
    #
    # params (string, optional, default: undefined): Kernel module parameters.
    #
    # force_params (boolean, optional, default: false):
    # If true, force that the module parameters are applied (via unload and load of
    # the module).
    
    # "Global" kernel module configuration
    kernel_module_list: []
      # - name: 'pcspkr'
      #   blacklist: yes
      #   blacklist: no
      # - name: 'pcspkr'
      #   # params: '
      #   state: 'present'
      #   persistent: no
      #
      ## This will cause the module pcspkr to be loaded on the next boot.
      # - name: 'pcspkr'
    
    # "Host group" kernel module configuration
    kernel_module_group_list: []
    
    # "Host" kernel module configuration
    kernel_module_host_list: []
    
    
    # Internals:
    kernel_module_blacklist_file: '/etc/modprobe.d/blacklist-ansible-kernel_module-role.conf'
    kernel_module_options_file: '/etc/modprobe.d/options-ansible-kernel_module-role.conf'
    kernel_module_load_file: '/etc/modules-load.d/ansible-kernel_module-role.conf'

List of internal variables used by the role:

    kernel_module_list_combined


### Authors and license

`kernel_module` role was written by:

- [Robin Schneider](https://github.com/ypid) | [e-mail](mailto:ypid@riseup.net)

License: [AGPLv3](https://tldrlegal.com/license/gnu-affero-general-public-license-v3-%28agpl-3.0%29)

***

README generated by [Ansigenome](https://github.com/nickjj/ansigenome/).
