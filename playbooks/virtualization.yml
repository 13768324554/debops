---

- name: Manage KVM hosts
  hosts: 'debops_kvm'
  sudo: True

  roles:
    - role: debops.nat
      nat_subnet: 128
      nat_interface: br2
      tags: nat

    - role: debops.dnsmasq
      dnsmasq_subnet: 128
      dnsmasq_interface: br2
      dnsmasq_domain: 'nat.{{ ansible_fqdn }}'
      tags: dnsmasq

    - { role: debops.kvm, tags: kvm }


- name: Manage LXC hosts
  hosts: 'debops_lxc'
  sudo: True

  roles:
    - role: debops.nat
      nat_subnet: 144
      nat_interface: br2
      tags: nat

    - role: debops.dnsmasq
      dnsmasq_subnet: 144
      dnsmasq_interface: br2
      dnsmasq_domain: 'nat.{{ ansible_fqdn }}'
      tags: dnsmasq

    - { role: debops.lxc, tags: lxc }


- name: Manage OpenVZ Hardware Nodes
  hosts: 'debops_openvz'
  sudo: True

  roles:
    - { role: debops.openvz, tags: openvz }

