---

- name: Ensure ferm is installed
  apt: pkg=ferm state=latest install_recommends=no
  tags:
    - ferm
    - network
    - packages

- name: Create configuration directories
  file: path={{ item }} state=directory owner=root group=root mode=0750
  with_items:
    - '/etc/ferm/ferm.d'
    - '/etc/ferm/filter-input.d'
  tags:
    - ferm
    - network

- name: Apply firewall configuration
  template: src=etc/ferm/ferm.conf.j2 dest=/etc/ferm/ferm.conf owner=root group=root backup=no
  notify: Restart ferm
  tags:
    - ferm
    - network

